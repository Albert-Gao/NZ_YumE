{"version":3,"sources":["webpack:///spec/test.spec.js","webpack:///webpack/bootstrap f1a50ba136b3a59e110d?9a10","webpack:///../spec/test.spec.ts","webpack:///./application/application.ts?f18c","webpack:///./application/page1search.ts?a484","webpack:///./application/page2list.ts?125b","webpack:///./application/page3Map.ts?cf7e","webpack:///./emulator/services/StateService.ts?b70c","webpack:///./emulator/services/TemplatingService.ts?e74f","webpack:///./emulator/services/SystemService.ts?39fd","webpack:///./emulator/services/ActionService.ts?0899"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","StateService_1","TemplatingService_1","SystemService_1","ActionService_1","application_1","MockElement","aMockElement","type","name","testText","define","MockPage","page1","rawLayout","callback","bindToName","callbackFunction","console","log","page2","pageName","appTitle","MockApp","this","title","currentPageName","startPageName","pages","prototype","injectActionService","as","_as","startAddingPages","push","CentralCallbackFunc","elementID","myMockApp","describe","testStateService","StateService","it","getStartPageName","expect","toEqual","getCurrentPageName","newName","setCurrentPageName","currentPage","getCurrentPage","page","getPage","undefined","getPages","spyOn","emulatorCentralCallBack","toHaveBeenCalledWith","fn","getAppCallBack","MockStateService","_app","element","targetElementInfo","myMockStateService","testTemplatingService","TemplatingService","testPage","buttonElement","aJQObject","createPage","$","attr","toHaveText","textElement","toExist","imageElement","inputElement","listElement","description","url","toHaveHtml","createPagesAndSave","calls","count","toBe","createLayout","toHaveClass","setFixtures","removeElementFromDOM","not","aJQItem","createjQueryItem","key","value","toHaveId","MockTemplatingService","document","createElement","addClass","className","attrs","styleClasses","text","myMockTemplatingService","testSystemService","SystemService","removeCurrentPageFromScreen","afterRenderLayout","goPage","toHaveBeenCalled","renewCurrentPage","and","callThrough","renderAllPages","goStartPage","done","startEmulator","POLL_TIME","endTime","Date","getTime","checkCondition","setTimeout","hideSplashScreen","toBeVisible","showNotification","is","myMockSystemService","testActionService","ActionService","reRenderPage","MockActionService","_systemService","words","callYelpSearchAPI","keywords","saveToLocalStorage","getFromLocalStorage","myMockActionService","testApplication","application","_actionService","length","appCallback","getMatchedFunction","testFunc","testString","tailorYelpResult","jsonOb","indexOf","toBeGreaterThan","location","address","coordinate","latitude","longitude","googleMapsHelper","coords","page1search_1","page2list_1","page3Map_1","page1search","page2list","page3Map","createPageArray","elementName","func","_this","json","list","_i","_a","_b","_c","e","image_url","targetElementID","targetPage","_item","phone","rating","category","categories","comment","snippet_text","lat","long","mapURL","apiKey","returnRawLayout","returnCallbackFuncs","targetID","searchButtonCallBack","info","goBackButtonCallBack","goMapCallBack","defaultMap","goHomeCallBack","app","returnPage","targetName","stateService","_stateService","buttons","outDiv","_loop_1","element1","row","this_1","temp","on","targetText","val","width","after","removeClass","append","temp1","temp2","temp3","label","input","listGroup","listItemsData","_loop_2","item","a","h5","listItemsData_1","remove","domElement","attrs_1","html","templatingService","_templatingService","prepend","backgroundDIV","brand","fadeIn","fadeOut","noticeDIV","systemService","localStorage","setItem","getItem","auth","consumerKey","consumerSecret","accessToken","accessTokenSecret","serviceProvider","signatureMethod","terms","near","accessor","tokenSecret","parameters","message","action","method","OAuth","setTimestampAndNonce","SignatureMethod","sign","parameterMap","getParameterMap","ajax","data","dataType","jsonpCallback","cache","textStatus","jqXHR","businesses","fail","errorThrown","JSON","stringify"],"mappings":"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","file":"./spec/test.spec.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar StateService_1 = __webpack_require__(7);\n\tvar TemplatingService_1 = __webpack_require__(8);\n\tvar SystemService_1 = __webpack_require__(9);\n\tvar ActionService_1 = __webpack_require__(10);\n\tvar application_1 = __webpack_require__(3);\n\tvar MockElement = (function () {\n\t    function MockElement() {\n\t    }\n\t    return MockElement;\n\t}());\n\tvar aMockElement = new MockElement();\n\taMockElement.type = \"text\";\n\taMockElement.name = \"testName\";\n\tvar testText = \"Some text to test with\";\n\taMockElement.define = testText;\n\tvar MockPage = (function () {\n\t    function MockPage() {\n\t    }\n\t    return MockPage;\n\t}());\n\tvar page1 = new MockPage();\n\tpage1.name = \"page1\";\n\tpage1.rawLayout = [aMockElement];\n\tpage1.callback = [{\n\t        bindToName: \"testName\",\n\t        callbackFunction: function () {\n\t            console.log(\"OK\");\n\t        }\n\t    }];\n\tvar page2 = new MockPage();\n\tpage2.name = \"page2\";\n\tvar pageName = \"page1\";\n\tvar appTitle = \"Title\";\n\tvar MockApp = (function () {\n\t    function MockApp() {\n\t        this.title = appTitle;\n\t        this.currentPageName = pageName;\n\t        this.startPageName = pageName;\n\t        this.pages = [page1, page2];\n\t    }\n\t    MockApp.prototype.injectActionService = function (as) {\n\t        this._as = as;\n\t    };\n\t    ;\n\t    MockApp.prototype.startAddingPages = function () {\n\t        this.pages.push(page1);\n\t        this.pages.push(page2);\n\t    };\n\t    ;\n\t    MockApp.prototype.CentralCallbackFunc = function (pageName, elementID) { };\n\t    ;\n\t    return MockApp;\n\t}());\n\tvar myMockApp = new MockApp();\n\tdescribe('Tests for StateService', function () {\n\t    var testStateService = new StateService_1.StateService(myMockApp);\n\t    it('getStartPageName() should return the specified string', function () {\n\t        var startPageName = testStateService.getStartPageName();\n\t        expect(startPageName).toEqual(pageName);\n\t    });\n\t    it('getCurrentPageName() should return the correct string', function () {\n\t        var currentPageName = testStateService.getCurrentPageName();\n\t        expect(currentPageName).toEqual(pageName);\n\t    });\n\t    it('setCurrentPageName() should set the name of the current page', function () {\n\t        var newName = \"New Name\";\n\t        testStateService.setCurrentPageName(newName);\n\t        var currentPageName = testStateService.getCurrentPageName();\n\t        expect(currentPageName).toEqual(newName);\n\t        testStateService.setCurrentPageName(pageName);\n\t    });\n\t    it(\"getCurrentPage() should return an IPage object of the current page\", function () {\n\t        var currentPage = testStateService.getCurrentPage();\n\t        expect(currentPage.name).toEqual(\"page1\");\n\t    });\n\t    it(\"getPage() should return an IPage object with the specified name\", function () {\n\t        var page = testStateService.getPage(\"page2\");\n\t        expect(page.name).toEqual(\"page2\");\n\t    });\n\t    it(\"getPage() should return undefined if a string that does not match\" +\n\t        \" an existing page name is passed to it\", function () {\n\t        var page = testStateService.getPage(\"page3\");\n\t        expect(page).toEqual(undefined);\n\t    });\n\t    it(\"getPages() should return an array of all the pages the app contains\", function () {\n\t        var pages = testStateService.getPages();\n\t        expect(pages).toEqual([page1, page2]);\n\t    });\n\t    it(\"emulatorCentralCallBack() to call CentralCallbackFunc()\", function () {\n\t        spyOn(myMockApp, 'CentralCallbackFunc');\n\t        testStateService.emulatorCentralCallBack(aMockElement);\n\t        expect(myMockApp.CentralCallbackFunc).toHaveBeenCalledWith(page1.name, \"testName\");\n\t        testStateService.emulatorCentralCallBack(aMockElement, \"test\");\n\t        expect(myMockApp.CentralCallbackFunc).toHaveBeenCalledWith(page1.name, \"testName\", \"test\");\n\t    });\n\t    it(\"getAppCallBack() should return the correct function\", function () {\n\t        var fn = testStateService.getAppCallBack();\n\t        expect(fn(\"test\", \"test\")).toEqual(myMockApp.CentralCallbackFunc(\"test\", \"test\"));\n\t    });\n\t});\n\tvar MockStateService = (function () {\n\t    function MockStateService() {\n\t        this._app = myMockApp;\n\t    }\n\t    MockStateService.prototype.getCurrentPage = function () { return page1; };\n\t    ;\n\t    MockStateService.prototype.getCurrentPageName = function () { return page1.name; };\n\t    ;\n\t    MockStateService.prototype.getStartPageName = function () { return page1.name; };\n\t    ;\n\t    MockStateService.prototype.setCurrentPageName = function (name) { page1.name = name; };\n\t    ;\n\t    MockStateService.prototype.getPages = function () { return myMockApp.pages; };\n\t    ;\n\t    MockStateService.prototype.getPage = function (name) { return page1; };\n\t    ;\n\t    MockStateService.prototype.emulatorCentralCallBack = function (element, targetElementInfo) { };\n\t    ;\n\t    return MockStateService;\n\t}());\n\tvar myMockStateService = new MockStateService();\n\tdescribe('Tests for TemplatingService', function () {\n\t    var testTemplatingService = new TemplatingService_1.TemplatingService(myMockStateService);\n\t    describe('createPage() should return a jQuery object', function () {\n\t        var testPage = new MockPage();\n\t        testPage.name = \"testPage\";\n\t        it('that for button type contains right ID, classes, definition', function () {\n\t            var buttonElement = new MockElement();\n\t            buttonElement.type = \"button\";\n\t            buttonElement.name = \"buttonElement\";\n\t            buttonElement.define = \"buttonElementDefinition\";\n\t            testPage.rawLayout = [buttonElement];\n\t            var aJQObject = testTemplatingService.createPage(testPage);\n\t            expect($(\"button\", aJQObject).attr(\"id\")).toEqual(buttonElement.name);\n\t            expect($(\".btn\", aJQObject)).toHaveText(buttonElement.define);\n\t        });\n\t        it('that for text type contains right ID, p and text elements', function () {\n\t            var textElement = new MockElement();\n\t            textElement.type = \"text\";\n\t            textElement.name = \"textElement\";\n\t            textElement.define = \"textElementDefinition\";\n\t            testPage.rawLayout = [textElement];\n\t            var aJQObject = testTemplatingService.createPage(testPage);\n\t            expect($(\"#textElement\", aJQObject)).toExist();\n\t            expect($(\"p\", aJQObject)).toHaveText(textElement.define);\n\t        });\n\t        it('that for image type contains right ID, class, img attr and img source', function () {\n\t            var imageElement = new MockElement();\n\t            imageElement.type = \"image\";\n\t            imageElement.name = \"imageElement\";\n\t            imageElement.define = \"../dist/assets/food.png\";\n\t            testPage.rawLayout = [imageElement];\n\t            var aJQObject = testTemplatingService.createPage(testPage);\n\t            expect($(\"#imageElement\", aJQObject)).toExist();\n\t            expect($(\".img-fluid\", aJQObject)).toExist();\n\t            expect($(\"img\", aJQObject).attr(\"src\")).toEqual(imageElement.define);\n\t        });\n\t        it('that for input type contains the right classes, attributes and text', function () {\n\t            var inputElement = new MockElement();\n\t            inputElement.type = \"input\";\n\t            inputElement.name = \"inputElement\";\n\t            inputElement.define = \"inputElementDefinition\";\n\t            testPage.rawLayout = [inputElement];\n\t            var aJQObject = testTemplatingService.createPage(testPage);\n\t            expect($(\".form-group\", aJQObject)).toExist();\n\t            expect($(\".sr-only\", aJQObject)).toExist();\n\t            expect($(\".form-control\", aJQObject)).toExist();\n\t            expect($(\"label\", aJQObject).attr(\"for\")).toEqual(inputElement.name);\n\t            expect($(\"input\", aJQObject).attr(\"type\")).toEqual(\"text\");\n\t            expect($(\"input\", aJQObject).attr(\"id\")).toEqual(inputElement.name);\n\t            expect($(\"input\", aJQObject).attr(\"for\")).toEqual(inputElement.name);\n\t            expect($(\"input\", aJQObject).attr(\"placeholder\")).toEqual(inputElement.define);\n\t            expect($(\"input\", aJQObject)).toHaveText(inputElement.define);\n\t        });\n\t        it('that for list type contains the right classes and descriptions', function () {\n\t            var listElement = new MockElement();\n\t            listElement.type = \"list\";\n\t            listElement.name = \"listElement\";\n\t            listElement.define =\n\t                [{ title: \"item1\", description: \"item1Desc\", url: \"item1url\" },\n\t                    { title: \"item2\", description: \"item2Desc\", url: \"item2url\" }];\n\t            testPage.rawLayout = [listElement];\n\t            var aJQObject = testTemplatingService.createPage(testPage);\n\t            expect($(\".list-group\", aJQObject)).toExist();\n\t            expect($(\"h5\", aJQObject)).toHaveHtml(\"item1\");\n\t            expect($(\"h5:nth(1)\", aJQObject)).toHaveHtml(\"item2\");\n\t            expect($(\"p\", aJQObject)).toHaveHtml(\"item1Desc\");\n\t            expect($(\"p:nth(1)\", aJQObject)).toHaveHtml(\"item2Desc\");\n\t        });\n\t    });\n\t    it('createPagesAndSave() should call createPage the right number of times', function () {\n\t        spyOn(testTemplatingService, 'createPage');\n\t        testTemplatingService.createPagesAndSave();\n\t        expect(testTemplatingService.createPage.calls.count()).toBe(2);\n\t    });\n\t    it('createLayout() should return a jQuery object with a div of class conatiner-fluid', function () {\n\t        var aJQObject = testTemplatingService.createLayout();\n\t        expect($(aJQObject)).toHaveClass(\"container-fluid\");\n\t        expect($(aJQObject)).toEqual(\"div\");\n\t    });\n\t    it('removeElementFromDOM() should remove the specified element from the DOM', function () {\n\t        setFixtures(\"<div class='container-fluid'></div>\");\n\t        expect($(\".container-fluid\")).toExist();\n\t        testTemplatingService.removeElementFromDOM(\".container-fluid\");\n\t        expect($(\".container-fluid\")).not.toExist();\n\t    });\n\t    it('createjQueryItem() should return the correct jQuery object', function () {\n\t        var aJQItem = testTemplatingService.createjQueryItem(\"div\", [{ key: \"id\", value: \"testID\" }], \"testClass\", \"testString\");\n\t        expect($(aJQItem)).toHaveId(\"testID\");\n\t        expect($(aJQItem)).toHaveClass(\"testClass\");\n\t    });\n\t});\n\tvar MockTemplatingService = (function () {\n\t    function MockTemplatingService() {\n\t    }\n\t    MockTemplatingService.prototype.createPage = function (page) {\n\t        return $(document.createElement(\"div\"))\n\t            .addClass(\"testingClass\");\n\t    };\n\t    ;\n\t    MockTemplatingService.prototype.createPagesAndSave = function () { };\n\t    ;\n\t    MockTemplatingService.prototype.createLayout = function () { return $(document.createElement(\"div\")); };\n\t    ;\n\t    MockTemplatingService.prototype.removeElementFromDOM = function (className) { };\n\t    ;\n\t    MockTemplatingService.prototype.createjQueryItem = function (type, attrs, styleClasses, text) {\n\t        return $(document.createElement(\"div\"))\n\t            .addClass(\"testingClass\");\n\t    };\n\t    ;\n\t    return MockTemplatingService;\n\t}());\n\tvar myMockTemplatingService = new MockTemplatingService();\n\tdescribe('Tests for SystemService method', function () {\n\t    var testSystemService = new SystemService_1.SystemService(myMockTemplatingService, myMockStateService);\n\t    it('removeCurrentPageFromScreen() should remove the current page from the DOM', function () {\n\t        spyOn(myMockTemplatingService, \"removeElementFromDOM\");\n\t        testSystemService.removeCurrentPageFromScreen();\n\t        expect(myMockTemplatingService.removeElementFromDOM)\n\t            .toHaveBeenCalledWith(\".container-fluid\");\n\t    });\n\t    it('goPage() should remove the current page, and show the new one', function () {\n\t        page2.afterRenderLayout = $(document.createElement(\"div\")).addClass(\"second\");\n\t        setFixtures(\"<div class='emulator'></div>\");\n\t        expect($(\".second\")).not.toExist();\n\t        spyOn(testSystemService, \"removeCurrentPageFromScreen\");\n\t        spyOn(testSystemService, \"renewCurrentPage\");\n\t        testSystemService.goPage(\"page2\");\n\t        expect(testSystemService.removeCurrentPageFromScreen).toHaveBeenCalled();\n\t        expect(testSystemService.renewCurrentPage).toHaveBeenCalledWith(\"page2\");\n\t        expect($(\".second\")).toExist();\n\t    });\n\t    describe('renderAllPages() should', function () {\n\t        it('if called with a page, should rerender the page', function () {\n\t            spyOn(myMockTemplatingService, \"createPage\").and.callThrough();\n\t            spyOn(myMockStateService, \"getPage\").and.callThrough();\n\t            expect($(page1.afterRenderLayout)).not.toExist();\n\t            testSystemService.renderAllPages(page1);\n\t            expect(myMockTemplatingService.createPage).toHaveBeenCalledWith(page1);\n\t            expect(myMockStateService.getPage).toHaveBeenCalledWith(page1.name);\n\t            expect($(page1.afterRenderLayout)).toExist();\n\t        });\n\t        it('if called with no arguments, call createPagesAndSave()', function () {\n\t            spyOn(myMockTemplatingService, \"createPagesAndSave\");\n\t            testSystemService.renderAllPages();\n\t            expect(myMockTemplatingService.createPagesAndSave).toHaveBeenCalledWith();\n\t        });\n\t    });\n\t    it('goStartPage() should call getStartPageName and goPage', function () {\n\t        spyOn(myMockStateService, \"getStartPageName\");\n\t        spyOn(testSystemService, \"goPage\");\n\t        testSystemService.goStartPage();\n\t        expect(myMockStateService.getStartPageName).toHaveBeenCalled();\n\t        expect(testSystemService.goPage).toHaveBeenCalled();\n\t    });\n\t    it('renewCurrentPage() should call setCurrentPageName from StateService', function () {\n\t        spyOn(myMockStateService, \"setCurrentPageName\");\n\t        testSystemService.renewCurrentPage(\"testName\");\n\t        expect(myMockStateService.setCurrentPageName)\n\t            .toHaveBeenCalledWith(\"testName\");\n\t    });\n\t    it('startEmulator() should call hideSplashScreen,' +\n\t        'renderAllPages and goStartPage', function (done) {\n\t        spyOn(testSystemService, \"hideSplashScreen\");\n\t        spyOn(testSystemService, \"renderAllPages\");\n\t        spyOn(testSystemService, \"goStartPage\");\n\t        testSystemService.startEmulator();\n\t        var POLL_TIME = 10;\n\t        var endTime = new Date().getTime() + 10000;\n\t        var checkCondition = function () {\n\t            if (new Date().getTime() <= endTime &&\n\t                testSystemService.goStartPage.calls.count() < 1) {\n\t                setTimeout(checkCondition, POLL_TIME);\n\t            }\n\t            else {\n\t                expect(testSystemService.hideSplashScreen).toHaveBeenCalled();\n\t                expect(testSystemService.renderAllPages).toHaveBeenCalled();\n\t                expect(testSystemService.goStartPage).toHaveBeenCalled();\n\t                done();\n\t            }\n\t        };\n\t        checkCondition();\n\t    }, 10000);\n\t    it('hideSplashScreen() should hide the splash screen', function () {\n\t        setFixtures(\"<div class='splashScreen'></div>\");\n\t        expect($(\".splashScreen\")).toBeVisible();\n\t        testSystemService.hideSplashScreen();\n\t        expect($(\".splashScreen\")).not.toBeVisible();\n\t    });\n\t    it('showNotification() should show a notification, and then fade it out', function (done) {\n\t        setFixtures(\"<div class='emulator'></div>\");\n\t        expect($(\".testingClass\")).not.toBeVisible();\n\t        testSystemService.showNotification(\"blah\");\n\t        expect($(\".testingClass\")).toBeVisible();\n\t        var POLL_TIME = 10;\n\t        var endTime = new Date().getTime() + 5000;\n\t        var checkCondition = function () {\n\t            if (new Date().getTime() <= endTime &&\n\t                $(\".testingClass\").is(\":visible\")) {\n\t                setTimeout(checkCondition, POLL_TIME);\n\t            }\n\t            else {\n\t                expect($(\".testingClass\")).not.toBeVisible();\n\t                done();\n\t            }\n\t        };\n\t        checkCondition();\n\t    }, 5000);\n\t});\n\tdescribe('Tests for ActionService', function () {\n\t    var myMockSystemService = new SystemService_1.SystemService(myMockTemplatingService, myMockStateService);\n\t    var testActionService = new ActionService_1.ActionService(myMockSystemService);\n\t    it('goPage() should call goPage from SystemService', function () {\n\t        spyOn(myMockSystemService, \"goPage\");\n\t        testActionService.goPage(\"page1\");\n\t        expect(myMockSystemService.goPage).toHaveBeenCalledWith(\"page1\");\n\t    });\n\t    it('showNotification() should call showNotification from SystemService', function () {\n\t        spyOn(myMockSystemService, \"showNotification\");\n\t        testActionService.showNotification(\"showNotification\");\n\t        expect(myMockSystemService.showNotification).toHaveBeenCalledWith(\"showNotification\");\n\t    });\n\t    it('reRenderPage() should renderAllPages from SystemService', function () {\n\t        spyOn(myMockSystemService, \"renderAllPages\");\n\t        testActionService.reRenderPage(page1);\n\t        expect(myMockSystemService.renderAllPages).toHaveBeenCalledWith(page1);\n\t    });\n\t});\n\tvar MockActionService = (function () {\n\t    function MockActionService() {\n\t        this._systemService = new SystemService_1.SystemService(myMockTemplatingService, myMockStateService);\n\t    }\n\t    MockActionService.prototype.goPage = function (name) { };\n\t    ;\n\t    MockActionService.prototype.showNotification = function (words) { };\n\t    ;\n\t    MockActionService.prototype.callYelpSearchAPI = function (keywords, callback) { };\n\t    ;\n\t    MockActionService.prototype.reRenderPage = function (page) { };\n\t    ;\n\t    MockActionService.prototype.saveToLocalStorage = function (key, value) { };\n\t    ;\n\t    MockActionService.prototype.getFromLocalStorage = function (key) { return \"\"; };\n\t    ;\n\t    return MockActionService;\n\t}());\n\tvar myMockActionService = new MockActionService();\n\tdescribe('Tests for Application', function () {\n\t    var testApplication = new application_1.application();\n\t    it('injectActionService() should store the injected ActionService', function () {\n\t        testApplication.injectActionService(myMockActionService);\n\t        expect(testApplication._actionService).toBe(myMockActionService);\n\t    });\n\t    testApplication.startAddingPages();\n\t    it('startAddingPages() should add three objects into the apps pages array', function () {\n\t        expect(testApplication.pages.length).toEqual(3);\n\t    });\n\t    describe(\"appCallBack() when called with\", function () {\n\t        it('page1button to call callYelpSearchAPI (in ActionService)', function () {\n\t            spyOn(myMockActionService, \"callYelpSearchAPI\");\n\t            testApplication.appCallback(\"test\", \"page1button\", \"searchTerm\");\n\t            expect(myMockActionService.callYelpSearchAPI).toHaveBeenCalled();\n\t        });\n\t        it('home to call getMatchedFunctino with the right arguments', function () {\n\t            spyOn(testApplication, \"getMatchedFunction\");\n\t            testApplication.getMatchedFunction(\"test\", \"home\");\n\t            expect(testApplication.getMatchedFunction).toHaveBeenCalledWith(\"test\", \"home\");\n\t        });\n\t        it('mapButton to call getMatchedFunctino with the right arguments', function () {\n\t            spyOn(testApplication, \"getMatchedFunction\");\n\t            testApplication.getMatchedFunction(\"test\", \"mapButton\");\n\t            expect(testApplication.getMatchedFunction).toHaveBeenCalledWith(\"test\", \"mapButton\");\n\t        });\n\t        it('backToResults to call getMatchedFunctino with the right arguments', function () {\n\t            spyOn(testApplication, \"getMatchedFunction\");\n\t            testApplication.getMatchedFunction(\"test\", \"backToResults\");\n\t            expect(testApplication.getMatchedFunction).toHaveBeenCalledWith(\"test\", \"backToResults\");\n\t        });\n\t    });\n\t    it('getMatchedFunction() should return the correct function', function () {\n\t        var testFunc = testApplication.getMatchedFunction(\"page3Map\", \"backToResults\");\n\t        expect(testFunc).toEqual(testApplication.pages[2].callback[0].callbackFunction);\n\t    });\n\t    describe(\"tailorYelpResult() should\", function () {\n\t        var testString = testApplication.tailorYelpResult(undefined);\n\t        var jsonOb = {};\n\t        it('return the the error message when called with undefined', function () {\n\t            expect(testString.indexOf(\"Sorry\")).toBeGreaterThan(-1);\n\t        });\n\t        it('return the a string with appropriate contents if called with an empty json object', function () {\n\t            testString = testApplication.tailorYelpResult(jsonOb);\n\t            expect(testString.indexOf(\"Rating\")).toBeGreaterThan(-1);\n\t        });\n\t        jsonOb = { \"location\": { \"address\": [\"150 Stuart St\"],\n\t                \"coordinate\": { \"latitude\": -45.8744,\n\t                    \"longitude\": 170.504\n\t                }\n\t            }\n\t        };\n\t        it('return a string with appropriate details when called with a populated json object', function () {\n\t            testString = testApplication.tailorYelpResult(jsonOb);\n\t            expect(testString.indexOf(\"150 Stuart St\")).toBeGreaterThan(-1);\n\t        });\n\t        it('call googleMapsHelper with the coords if called with a json object containing them', function () {\n\t            spyOn(testApplication, \"googleMapsHelper\");\n\t            testString = testApplication.tailorYelpResult(jsonOb);\n\t            expect(testApplication.googleMapsHelper).toHaveBeenCalledWith(\"-45.8744,170.504\");\n\t        });\n\t    });\n\t    it('googleMapsHelper() should return the correct string', function () {\n\t        var coords = \"45.00,45.00\";\n\t        var url = testApplication.googleMapsHelper(coords);\n\t        expect(url.indexOf(coords)).toEqual(186);\n\t        coords = \"asdfasdf\";\n\t        url = testApplication.googleMapsHelper(coords);\n\t        expect(url.indexOf(coords)).toEqual(186);\n\t    });\n\t});\n\n\n/***/ },\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar page1search_1 = __webpack_require__(4);\n\tvar page2list_1 = __webpack_require__(5);\n\tvar page3Map_1 = __webpack_require__(6);\n\tvar application = (function () {\n\t    function application() {\n\t        this.title = \"YumE\";\n\t        this.currentPageName = \"\";\n\t        this.startPageName = \"page1search\";\n\t        this.pages = [];\n\t        this.CentralCallbackFunc = this.appCallback;\n\t    }\n\t    application.prototype.injectActionService = function (as) {\n\t        this._actionService = as;\n\t    };\n\t    application.prototype.startAddingPages = function () {\n\t        this.pages.push(new page1search_1.page1search());\n\t        this.pages.push(new page2list_1.page2list());\n\t        this.pages.push(new page3Map_1.page3Map());\n\t    };\n\t    application.prototype.createPageArray = function () {\n\t    };\n\t    application.prototype.appCallback = function (pageName, elementName, targetElementInfo) {\n\t        var _this = this;\n\t        var func;\n\t        switch (elementName) {\n\t            case \"page1button\":\n\t                if (targetElementInfo) {\n\t                    this._actionService.callYelpSearchAPI(targetElementInfo, function (json) {\n\t                        var list = _this.tailorYelpResult(json);\n\t                        for (var _i = 0, _a = _this.pages; _i < _a.length; _i++) {\n\t                            var page = _a[_i];\n\t                            if (page.name === 'page2list') {\n\t                                for (var _b = 0, _c = page.rawLayout; _b < _c.length; _b++) {\n\t                                    var e = _c[_b];\n\t                                    if (e.type === 'text' && e.name === 'page2text') {\n\t                                        e.define = list;\n\t                                    }\n\t                                    else if (e.type === 'image') {\n\t                                        if (typeof json !== 'undefined') {\n\t                                            if (typeof json.image_url !== 'undefined') {\n\t                                                e.define = json.image_url;\n\t                                            }\n\t                                            else {\n\t                                                e.define = \"assets/food.png\";\n\t                                            }\n\t                                        }\n\t                                    }\n\t                                }\n\t                                _this._actionService.reRenderPage(page);\n\t                                break;\n\t                            }\n\t                        }\n\t                        func = _this.getMatchedFunction(pageName, elementName, targetElementInfo);\n\t                        func(_this._actionService, targetElementInfo);\n\t                    });\n\t                }\n\t                else {\n\t                    this.getMatchedFunction(pageName, elementName)(this._actionService);\n\t                }\n\t                break;\n\t            case \"home\":\n\t                func = this.getMatchedFunction(\"page2list\", elementName);\n\t                func(this._actionService);\n\t                break;\n\t            case \"mapButton\":\n\t                this._actionService.reRenderPage(this.pages[2]);\n\t                func = this.getMatchedFunction(\"page2list\", elementName);\n\t                func(this._actionService);\n\t                break;\n\t            case \"backToResults\":\n\t                func = this.getMatchedFunction(\"page3Map\", elementName);\n\t                func(this._actionService);\n\t        }\n\t    };\n\t    application.prototype.getMatchedFunction = function (pageName, elementID, targetElementID) {\n\t        var callback;\n\t        var targetPage;\n\t        for (var _i = 0, _a = this.pages; _i < _a.length; _i++) {\n\t            var page = _a[_i];\n\t            if (page.name === pageName) {\n\t                targetPage = page;\n\t                break;\n\t            }\n\t        }\n\t        for (var _b = 0, _c = targetPage.callback; _b < _c.length; _b++) {\n\t            var func = _c[_b];\n\t            if (func.bindToName === elementID) {\n\t                callback = func;\n\t                break;\n\t            }\n\t        }\n\t        return callback.callbackFunction;\n\t    };\n\t    application.prototype.tailorYelpResult = function (json) {\n\t        var define;\n\t        if (json) {\n\t            var _item = json;\n\t            var title = _item.name ? _item.name : \"\";\n\t            var phone = _item.phone ? _item.phone : \"\";\n\t            var rating = _item.rating ? _item.rating : \"\";\n\t            var category = _item.categories ? _item.categories[0][0] : \"\";\n\t            var comment = _item.snippet_text ? _item.snippet_text : \"\";\n\t            var address = void 0;\n\t            var lat = void 0;\n\t            var long = void 0;\n\t            if (_item.location) {\n\t                address = _item.location.address ? _item.location.address[0] : \"\";\n\t                if (_item.location.coordinate) {\n\t                    lat = _item.location.coordinate.latitude;\n\t                    long = _item.location.coordinate.longitude;\n\t                }\n\t                else {\n\t                    lat = long = 0;\n\t                }\n\t            }\n\t            else {\n\t                address = \"\";\n\t                lat = long = 0;\n\t            }\n\t            for (var _i = 0, _a = this.pages[2].rawLayout; _i < _a.length; _i++) {\n\t                var e = _a[_i];\n\t                if (e.type === 'image') {\n\t                    var coords = \"\" + lat + \",\" + long;\n\t                    e.define = this.googleMapsHelper(coords);\n\t                    break;\n\t                }\n\t            }\n\t            define = '<br/>' + '<strong>Title: \\</strong>' + title + '<br/>' + '<strong>Phone: \\</strong>'\n\t                + phone + '   |  ' + '<strong\\>Address: \\</strong>' + address\n\t                + '<br/>' + '<strong>Rating: \\</strong>' + rating\n\t                + '   |  ' + '<strong>Category: \\</strong>' + category\n\t                + '<br/>' + '<strong>Comment: \\</strong>' + comment;\n\t        }\n\t        else {\n\t            define = '<br/>' + \"Sorry, Yelp can't recognize your keyword, please go back and search again.\";\n\t            this.pages[1].rawLayout[3].define = \"./assets/cry.png\";\n\t        }\n\t        return define;\n\t    };\n\t    application.prototype.googleMapsHelper = function (coords) {\n\t        var mapURL = \"https://maps.googleapis.com/maps/api/staticmap?&size=300x230&maptype=roadmap\" +\n\t            \"&visible=Octagon,Dunedin,NZ\" +\n\t            \"&markers=color:yellow%7Clabel:U%7C-45.8743,170.5036\" +\n\t            \"&markers=color:blue%7Clabel:F%7C\";\n\t        var apiKey = \"&key=AIzaSyDHTnM42xU_IGgOk0OGswZGOAtDRr8e66I\";\n\t        return mapURL + coords + apiKey;\n\t    };\n\t    return application;\n\t}());\n\texports.application = application;\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar page1search = (function () {\n\t    function page1search() {\n\t        this.name = \"page1search\";\n\t        this.rawLayout = this.returnRawLayout();\n\t        this.afterRenderLayout = null;\n\t        this.callback = this.returnCallbackFuncs();\n\t    }\n\t    page1search.prototype.returnRawLayout = function () {\n\t        return [\n\t            {\n\t                type: \"image\",\n\t                name: \"page1image\",\n\t                define: \"./assets/YuMe_logo.jpg\"\n\t            },\n\t            {\n\t                type: \"text\",\n\t                name: \"page1text\",\n\t                define: \"Search better, eat fatter :)\"\n\t            },\n\t            {\n\t                type: \"input\",\n\t                name: \"page1input\",\n\t                define: \"Enter the name\"\n\t            },\n\t            {\n\t                type: \"button\",\n\t                name: \"page1button\",\n\t                targetElementID: \"page1input\",\n\t                define: \"YumE it!\"\n\t            },\n\t            {\n\t                type: \"text\",\n\t                name: \"page1text1\",\n\t                define: \" \"\n\t            }\n\t        ];\n\t    };\n\t    page1search.prototype.returnCallbackFuncs = function () {\n\t        return [\n\t            {\n\t                bindToName: \"page1button\",\n\t                targetID: \"page1text\",\n\t                callbackFunction: this.searchButtonCallBack\n\t            }\n\t        ];\n\t    };\n\t    page1search.prototype.searchButtonCallBack = function (_actionService, info) {\n\t        if (info && info != \"\") {\n\t            _actionService.goPage(\"page2list\");\n\t        }\n\t        else {\n\t            _actionService.showNotification(\"Please enter the name of restaurant.\");\n\t        }\n\t    };\n\t    return page1search;\n\t}());\n\texports.page1search = page1search;\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar page2list = (function () {\n\t    function page2list() {\n\t        this.name = \"page2list\";\n\t        this.rawLayout = this.returnRawLayout();\n\t        this.afterRenderLayout = null;\n\t        this.callback = this.returnCallbackFuncs();\n\t    }\n\t    page2list.prototype.returnRawLayout = function () {\n\t        return [\n\t            {\n\t                type: \"text\",\n\t                name: \"page2placeholder\",\n\t                define: \" \"\n\t            },\n\t            {\n\t                type: \"button\",\n\t                name: \"home\",\n\t                define: \"Back\"\n\t            },\n\t            {\n\t                type: \"text\",\n\t                name: \"page2placeholder\",\n\t                define: \" \"\n\t            },\n\t            {\n\t                type: \"image\",\n\t                name: \"page2image\",\n\t                define: \"./assets/cry.png\"\n\t            },\n\t            {\n\t                type: \"text\",\n\t                name: \"page2text\",\n\t                define: \"I really love it\"\n\t            },\n\t            {\n\t                type: \"button\",\n\t                name: \"mapButton\",\n\t                define: \"Map\"\n\t            }\n\t        ];\n\t    };\n\t    page2list.prototype.returnCallbackFuncs = function () {\n\t        return [\n\t            {\n\t                bindToName: \"home\",\n\t                callbackFunction: this.goBackButtonCallBack\n\t            },\n\t            {\n\t                bindToName: \"mapButton\",\n\t                callbackFunction: this.goMapCallBack\n\t            }\n\t        ];\n\t    };\n\t    page2list.prototype.goBackButtonCallBack = function (_actionService) {\n\t        _actionService.goPage(\"page1search\");\n\t    };\n\t    page2list.prototype.goMapCallBack = function (_actionService) {\n\t        _actionService.goPage(\"page3Map\");\n\t    };\n\t    return page2list;\n\t}());\n\texports.page2list = page2list;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar page3Map = (function () {\n\t    function page3Map() {\n\t        this.defaultMap = \"https://maps.googleapis.com/maps/api/staticmap?&size=300x230&maptype=roadmap\" +\n\t            \"&visible=Octagon,Dunedin,NZ\" +\n\t            \"&markers=color:yellow%7Clabel:U%7C-45.8743,170.5036\" +\n\t            \"&key=AIzaSyDHTnM42xU_IGgOk0OGswZGOAtDRr8e66I\";\n\t        this.name = \"page3Map\";\n\t        this.rawLayout = this.returnRawLayout();\n\t        this.afterRenderLayout = null;\n\t        this.callback = this.returnCallbackFuncs();\n\t    }\n\t    page3Map.prototype.returnRawLayout = function () {\n\t        return [\n\t            {\n\t                type: \"text\",\n\t                name: \"page3placeholder\",\n\t                define: \" \"\n\t            },\n\t            {\n\t                type: \"button\",\n\t                name: \"backToResults\",\n\t                define: \"Back\"\n\t            },\n\t            {\n\t                type: \"button\",\n\t                name: \"home\",\n\t                define: \"Search\"\n\t            },\n\t            {\n\t                type: \"text\",\n\t                name: \"page3placeholder\",\n\t                define: \" \"\n\t            },\n\t            {\n\t                type: \"image\",\n\t                name: \"page3image\",\n\t                define: this.defaultMap\n\t            }\n\t        ];\n\t    };\n\t    page3Map.prototype.returnCallbackFuncs = function () {\n\t        return [\n\t            {\n\t                bindToName: \"backToResults\",\n\t                callbackFunction: this.goBackButtonCallBack\n\t            },\n\t            {\n\t                bindToName: \"home\",\n\t                callbackFunction: this.goHomeCallBack\n\t            }\n\t        ];\n\t    };\n\t    page3Map.prototype.goBackButtonCallBack = function (_actionService) {\n\t        _actionService.goPage(\"page2list\");\n\t    };\n\t    page3Map.prototype.goHomeCallBack = function (_actionService) {\n\t        _actionService.goPage(\"page1search\");\n\t    };\n\t    return page3Map;\n\t}());\n\texports.page3Map = page3Map;\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar StateService = (function () {\n\t    function StateService(app) {\n\t        this._app = app;\n\t    }\n\t    StateService.prototype.getStartPageName = function () {\n\t        return this._app.startPageName;\n\t    };\n\t    StateService.prototype.getCurrentPageName = function () {\n\t        return this._app.currentPageName;\n\t    };\n\t    StateService.prototype.setCurrentPageName = function (name) {\n\t        this._app.currentPageName = name;\n\t    };\n\t    StateService.prototype.getCurrentPage = function () {\n\t        var targetName = this._app.currentPageName;\n\t        var returnPage;\n\t        for (var _i = 0, _a = this._app.pages; _i < _a.length; _i++) {\n\t            var page = _a[_i];\n\t            if (page.name === targetName) {\n\t                returnPage = page;\n\t                break;\n\t            }\n\t        }\n\t        return returnPage;\n\t    };\n\t    StateService.prototype.getPage = function (name) {\n\t        var returnPage;\n\t        for (var _i = 0, _a = this._app.pages; _i < _a.length; _i++) {\n\t            var page = _a[_i];\n\t            if (page.name === name) {\n\t                returnPage = page;\n\t                break;\n\t            }\n\t        }\n\t        return returnPage;\n\t    };\n\t    StateService.prototype.getPages = function () {\n\t        return this._app.pages;\n\t    };\n\t    StateService.prototype.emulatorCentralCallBack = function (element, targetElementInfo) {\n\t        var currentPageName = this.getStartPageName();\n\t        if (targetElementInfo) {\n\t            this._app.CentralCallbackFunc(currentPageName, element.name, targetElementInfo);\n\t        }\n\t        else {\n\t            this._app.CentralCallbackFunc(currentPageName, element.name);\n\t        }\n\t    };\n\t    StateService.prototype.getAppCallBack = function () {\n\t        return this._app.CentralCallbackFunc;\n\t    };\n\t    return StateService;\n\t}());\n\texports.StateService = StateService;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar TemplatingService = (function () {\n\t    function TemplatingService(stateService) {\n\t        this._stateService = stateService;\n\t    }\n\t    TemplatingService.prototype.createPage = function (page) {\n\t        var _this = this;\n\t        var outDiv = this.createLayout();\n\t        var _loop_1 = function(element1) {\n\t            var row = this_1.createjQueryItem(\"div\", undefined, \"row\", undefined);\n\t            var element = element1;\n\t            switch (element.type) {\n\t                case \"button\":\n\t                    var temp = this_1.createjQueryItem(\"button\", [{ key: \"id\", value: element.name }], \"btn btn-primary btn-lg btn-block\", element.define);\n\t                    if (element.targetElementID) {\n\t                        $(\".emulator\").on('click', \"#\" + element.name, function () {\n\t                            var targetText = $(\"#\" + element.targetElementID).val();\n\t                            _this._stateService.emulatorCentralCallBack(element, targetText);\n\t                        });\n\t                    }\n\t                    else {\n\t                        $(\".emulator\").on('click', \"#\" + element.name, function () {\n\t                            _this._stateService.emulatorCentralCallBack(element);\n\t                        });\n\t                    }\n\t                    if ($(\".btn\", outDiv).length) {\n\t                        buttons = $(\".btn\", outDiv);\n\t                        var width = 12 / (buttons.length + 1);\n\t                        buttons.after(temp);\n\t                        buttons = $(\".btn\", outDiv);\n\t                        buttons.removeClass(\"btn-block\");\n\t                        buttons.addClass(\"col-sm-\" + width);\n\t                    }\n\t                    else {\n\t                        row.append(temp);\n\t                    }\n\t                    break;\n\t                case \"text\":\n\t                    var temp1 = this_1.createjQueryItem(\"p\", [{ key: \"id\", value: element.name }], undefined, element.define);\n\t                    row.append(temp1);\n\t                    break;\n\t                case \"image\":\n\t                    var temp2 = this_1.createjQueryItem(\"img\", [{ key: \"id\", value: element.name }, { key: \"src\", value: element.define }], \"img-fluid\");\n\t                    row.append(temp2);\n\t                    break;\n\t                case \"input\":\n\t                    var temp3 = this_1.createjQueryItem(\"div\", undefined, \"form-group\");\n\t                    var label = this_1.createjQueryItem(\"label\", [{ key: \"for\", value: element.name }], \"sr-only\", element.define);\n\t                    temp3.append(label);\n\t                    var input = this_1.createjQueryItem(\"input\", [{ key: \"type\", value: \"text\" }, { key: \"id\", value: element.name }, { key: \"for\", value: element.name }, { key: \"placeholder\", value: element.define }], \"form-control\", element.define);\n\t                    temp3.append(input);\n\t                    row.append(temp3);\n\t                    break;\n\t                case \"list\":\n\t                    var listGroup = this_1.createjQueryItem(\"div\", undefined, \"list-group\");\n\t                    var listItemsData = (element.define);\n\t                    var _loop_2 = function(item) {\n\t                        var a = this_1.createjQueryItem(\"a\", undefined, \"list-group-item list-group-item-action\");\n\t                        $(\".emulator\").on('click', \"#\" + element.name, function () {\n\t                            _this._stateService.emulatorCentralCallBack(element, item.url);\n\t                        });\n\t                        var h5 = this_1.createjQueryItem(\"h5\", undefined, \"list-group-item-heading\", item.title);\n\t                        var p = this_1.createjQueryItem(\"p\", undefined, \"list-group-item-text\", item.description);\n\t                        a.append(h5);\n\t                        a.append(p);\n\t                        listGroup.append(a);\n\t                    };\n\t                    for (var _i = 0, listItemsData_1 = listItemsData; _i < listItemsData_1.length; _i++) {\n\t                        var item = listItemsData_1[_i];\n\t                        _loop_2(item);\n\t                    }\n\t                    row.append(listGroup);\n\t                    break;\n\t            }\n\t            outDiv.append(row);\n\t        };\n\t        var this_1 = this;\n\t        var buttons;\n\t        for (var _a = 0, _b = page.rawLayout; _a < _b.length; _a++) {\n\t            var element1 = _b[_a];\n\t            _loop_1(element1);\n\t        }\n\t        return outDiv;\n\t    };\n\t    TemplatingService.prototype.createPagesAndSave = function () {\n\t        for (var _i = 0, _a = this._stateService.getPages(); _i < _a.length; _i++) {\n\t            var page = _a[_i];\n\t            page.afterRenderLayout = this.createPage(page);\n\t        }\n\t    };\n\t    TemplatingService.prototype.createLayout = function () {\n\t        return this.createjQueryItem('div', undefined, \"container-fluid\");\n\t    };\n\t    TemplatingService.prototype.removeElementFromDOM = function (className) {\n\t        $(className).remove();\n\t    };\n\t    TemplatingService.prototype.createjQueryItem = function (type, attrs, styleClasses, text) {\n\t        var domElement = $(document.createElement(type));\n\t        if (styleClasses) {\n\t            domElement.addClass(styleClasses);\n\t        }\n\t        if (attrs) {\n\t            for (var _i = 0, attrs_1 = attrs; _i < attrs_1.length; _i++) {\n\t                var item = attrs_1[_i];\n\t                domElement.attr(item.key, item.value);\n\t            }\n\t        }\n\t        if (text) {\n\t            domElement.html(text);\n\t        }\n\t        return domElement;\n\t    };\n\t    return TemplatingService;\n\t}());\n\texports.TemplatingService = TemplatingService;\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar SystemService = (function () {\n\t    function SystemService(templatingService, stateService) {\n\t        this._templatingService = templatingService;\n\t        this._stateService = stateService;\n\t    }\n\t    SystemService.prototype.removeCurrentPageFromScreen = function () {\n\t        this._templatingService.removeElementFromDOM(\".container-fluid\");\n\t    };\n\t    SystemService.prototype.goPage = function (name) {\n\t        this.removeCurrentPageFromScreen();\n\t        for (var _i = 0, _a = this._stateService.getPages(); _i < _a.length; _i++) {\n\t            var page = _a[_i];\n\t            if (page.name === name) {\n\t                $(\".emulator\").prepend(page.afterRenderLayout);\n\t                this.renewCurrentPage(page.name);\n\t            }\n\t        }\n\t    };\n\t    SystemService.prototype.renderAllPages = function (page) {\n\t        if (page) {\n\t            var page1 = this._templatingService.createPage(page);\n\t            this._stateService.getPage(page.name).afterRenderLayout = page1;\n\t        }\n\t        else {\n\t            this._templatingService.createPagesAndSave();\n\t        }\n\t    };\n\t    SystemService.prototype.goStartPage = function () {\n\t        this.goPage(this._stateService.getStartPageName());\n\t    };\n\t    SystemService.prototype.renewCurrentPage = function (name) {\n\t        this._stateService.setCurrentPageName(name);\n\t    };\n\t    SystemService.prototype.startEmulator = function () {\n\t        var _this = this;\n\t        var backgroundDIV = this._templatingService.createjQueryItem(\"div\", undefined, \"splashScreen\");\n\t        var brand = this._templatingService.createjQueryItem(\"p\", undefined, \"brand\", \"Smartisan\");\n\t        $(\".emulator\").append(backgroundDIV);\n\t        backgroundDIV.append(brand);\n\t        backgroundDIV.fadeIn('slow', function () {\n\t            brand.fadeIn('slow')\n\t                .fadeOut('slow')\n\t                .fadeIn('slow', function () {\n\t                _this.hideSplashScreen();\n\t                _this.renderAllPages();\n\t                _this.goStartPage();\n\t            });\n\t        });\n\t    };\n\t    SystemService.prototype.hideSplashScreen = function () {\n\t        $(\".splashScreen\").fadeOut('slow').remove();\n\t    };\n\t    SystemService.prototype.showNotification = function (text) {\n\t        var noticeDIV = this._templatingService.createjQueryItem(\"div\", undefined, \"bg-danger\", text);\n\t        $(\".emulator\").prepend(noticeDIV);\n\t        setTimeout(function () {\n\t            noticeDIV.fadeOut('slow').remove();\n\t        }, 2000);\n\t    };\n\t    return SystemService;\n\t}());\n\texports.SystemService = SystemService;\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ActionService = (function () {\n\t    function ActionService(systemService) {\n\t        this._systemService = systemService;\n\t    }\n\t    ActionService.prototype.goPage = function (name) {\n\t        this._systemService.goPage(name);\n\t    };\n\t    ActionService.prototype.showNotification = function (words) {\n\t        this._systemService.showNotification(words);\n\t    };\n\t    ActionService.prototype.saveToLocalStorage = function (key, value) {\n\t        localStorage.setItem(key, value);\n\t    };\n\t    ActionService.prototype.getFromLocalStorage = function (key) {\n\t        return localStorage.getItem(key);\n\t    };\n\t    ActionService.prototype.reRenderPage = function (page) {\n\t        this._systemService.renderAllPages(page);\n\t    };\n\t    ActionService.prototype.callYelpSearchAPI = function (keywords, callback) {\n\t        var auth = {\n\t            consumerKey: \"sNul62e6H0We5KJLGYP_Bw\",\n\t            consumerSecret: \"RxvIBp4BxRvNVxjaPlUWuiPFcYg\",\n\t            accessToken: \"nguVll4te_e1oDcv2EkS4xKC6GOoQhcN\",\n\t            accessTokenSecret: \"DrumlhFl5Kwb1ksCpRKEtiW6B58\",\n\t            serviceProvider: {\n\t                signatureMethod: \"HMAC-SHA1\"\n\t            }\n\t        };\n\t        var terms = keywords;\n\t        var near = 'Dunedin';\n\t        var category = 'restaurants,food,bars';\n\t        var accessor = {\n\t            consumerSecret: auth.consumerSecret,\n\t            tokenSecret: auth.accessTokenSecret\n\t        };\n\t        var parameters = [];\n\t        parameters.push(['term', terms]);\n\t        parameters.push(['location', near]);\n\t        parameters.push(['category_filter', category]);\n\t        parameters.push(['callback', 'cb']);\n\t        parameters.push(['oauth_consumer_key', auth.consumerKey]);\n\t        parameters.push(['oauth_consumer_secret', auth.consumerSecret]);\n\t        parameters.push(['oauth_token', auth.accessToken]);\n\t        parameters.push(['oauth_signature_method', 'HMAC-SHA1']);\n\t        var message = {\n\t            'action': 'https://api.yelp.com/v2/search',\n\t            'method': 'GET',\n\t            'parameters': parameters\n\t        };\n\t        OAuth.setTimestampAndNonce(message);\n\t        OAuth.SignatureMethod.sign(message, accessor);\n\t        var parameterMap = OAuth.getParameterMap(message.parameters);\n\t        $.ajax({\n\t            'url': message.action,\n\t            'data': parameterMap,\n\t            'dataType': 'jsonp',\n\t            'jsonpCallback': 'cb',\n\t            'cache': true\n\t        })\n\t            .done(function (data, textStatus, jqXHR) {\n\t            callback(data.businesses[0]);\n\t        })\n\t            .fail(function (jqXHR, textStatus, errorThrown) {\n\t            console.log('error[' + errorThrown + '], status[' + textStatus\n\t                + '], jqXHR[' + JSON.stringify(jqXHR) + ']');\n\t        });\n\t    };\n\t    return ActionService;\n\t}());\n\texports.ActionService = ActionService;\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** spec/test.spec.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f1a50ba136b3a59e110d\n **/","///<reference path=\"../src/emulator/ui/types/jquery.d.ts\" />\n///<reference path=\"typings/jasmine-jquery.d.ts\" />\n\nimport {IStateService} from \"../src/emulator/models/serviceModels/IStateService\";\nimport {ITemplatingService} from \"../src/emulator/models/serviceModels/ITemplatingService\";\nimport {ISystemService} from \"../src/emulator/models/serviceModels/ISystemService\";\nimport {IActionService} from \"../src/emulator/models/serviceModels/IActionService\";\nimport {IPage} from \"../src/emulator/models/dataModels/IPage\";\nimport {IApp} from \"../src/emulator/models/dataModels/IApp\";\nimport {IElement} from \"../src/emulator/models/dataModels/IElement\";\nimport {IListItem} from \"../src/emulator/models/dataModels/IListItem\";\nimport {IFunc} from \"../src/emulator/models/dataModels/IFunction\";\nimport {StateService} from \"../src/emulator/services/StateService\";\nimport {TemplatingService} from \"../src/emulator/services/TemplatingService\";\nimport {SystemService} from \"../src/emulator/services/SystemService\";\nimport {ActionService} from \"../src/emulator/services/ActionService\";\nimport {application} from \"../src/application/application\";\n\nclass MockElement implements IElement {\n\ttype;\n    name:string;\n    targetElementID:string;\n    define:string|Array<IListItem>;\n}\nlet aMockElement = new MockElement();\naMockElement.type = \"text\";\naMockElement.name = \"testName\";\nlet testText: string = \"Some text to test with\";\naMockElement.define = testText;\n\nclass MockPage implements IPage {\n\tname: string; \n\trawLayout:Array<IElement>;\n\tafterRenderLayout: JQuery;\n\tcallback:Array<IFunc>;\n}\nlet page1 = new MockPage();\npage1.name = \"page1\";\npage1.rawLayout = [aMockElement];\npage1.callback = [{\n\tbindToName : \"testName\",\n\tcallbackFunction : function(){\n\t\tconsole.log(\"OK\");\n\t}\n}];\nlet page2 = new MockPage();\npage2.name = \"page2\";\n\nlet pageName: string = \"page1\";\nlet appTitle: string = \"Title\";\nclass MockApp implements IApp {\n    title:string = appTitle;\n    currentPageName:string = pageName;\n    startPageName:string = pageName;\n    pages:Array<IPage> = [page1, page2];\n\t_as:IActionService;\n    injectActionService(as:IActionService) {\n\t\tthis._as = as;\n\t};\n    startAddingPages() {\n\t\tthis.pages.push(page1);\n\t\tthis.pages.push(page2);\n\t};\n    CentralCallbackFunc(pageName:string, elementID?:string) {};\n}\nlet myMockApp = new MockApp();\n\ndescribe('Tests for StateService', () => {\n    let testStateService: StateService = new StateService(myMockApp);  \n    it('getStartPageName() should return the specified string', () => {\n        let startPageName: string  = testStateService.getStartPageName();\n        expect(startPageName).toEqual(pageName);\n    });\n    it('getCurrentPageName() should return the correct string', () => {\n        let currentPageName: string = testStateService.getCurrentPageName();\n        expect(currentPageName).toEqual(pageName);\n    });\n    it('setCurrentPageName() should set the name of the current page', () => {\n    \tlet newName :string = \"New Name\";\n    \ttestStateService.setCurrentPageName(newName);\n        let currentPageName: string = testStateService.getCurrentPageName();\n        expect(currentPageName).toEqual(newName);\n        testStateService.setCurrentPageName(pageName); \n        //as \"new name\" is not actually a page\n    });\n    it(\"getCurrentPage() should return an IPage object of the current page\", () => {\n    \tlet currentPage: IPage = testStateService.getCurrentPage();\n    \texpect(currentPage.name).toEqual(\"page1\");\n    });\n    it(\"getPage() should return an IPage object with the specified name\", () => {\n    \tlet page: IPage = testStateService.getPage(\"page2\");\n    \texpect(page.name).toEqual(\"page2\");\n    });\n    it(\"getPage() should return undefined if a string that does not match\" +\n    \t\" an existing page name is passed to it\", () => {\n    \tlet page: IPage = testStateService.getPage(\"page3\");\n    \texpect(page).toEqual(undefined);\n    });\n    it(\"getPages() should return an array of all the pages the app contains\", () => {\n    \tlet pages: Array<IPage> = testStateService.getPages();\n    \texpect(pages).toEqual([page1, page2]);\n    });\n    it(\"emulatorCentralCallBack() to call CentralCallbackFunc()\", () => {\n    \tspyOn(myMockApp, 'CentralCallbackFunc');\n    \ttestStateService.emulatorCentralCallBack(aMockElement);\n    \texpect(myMockApp.CentralCallbackFunc).toHaveBeenCalledWith(page1.name, \"testName\");\n    \ttestStateService.emulatorCentralCallBack(aMockElement, \"test\");\n    \texpect(myMockApp.CentralCallbackFunc).toHaveBeenCalledWith(page1.name, \"testName\", \"test\");\n    });\n    it(\"getAppCallBack() should return the correct function\", () => {\n    \tlet fn = testStateService.getAppCallBack();\n    \texpect(fn(\"test\", \"test\")).toEqual(myMockApp.CentralCallbackFunc(\"test\", \"test\"));\n    })\n});\n\nclass MockStateService implements IStateService{\n    _app:IApp = myMockApp;\n    getCurrentPage():IPage {return page1};\n    getCurrentPageName():string {return page1.name};\n    getStartPageName():string {return page1.name};\n    setCurrentPageName(name:string) {page1.name = name};\n    getPages():Array<IPage> {return myMockApp.pages};\n    getPage(name:string ):IPage {return page1};\n    getAppCallBack:(element:IElement,targetElementInfo?:string) => void;\n    emulatorCentralCallBack(element:IElement,targetElementInfo?:string) {};\n}\nlet myMockStateService = new MockStateService();\n\ndescribe('Tests for TemplatingService', () => {\n\tlet testTemplatingService: TemplatingService = new TemplatingService(myMockStateService);\n\tdescribe('createPage() should return a jQuery object', () => {\n\t\tlet testPage = new MockPage();\n\t\ttestPage.name = \"testPage\";\n\t\tit('that for button type contains right ID, classes, definition', () => {\n\t\t\tlet buttonElement = new MockElement();\n\t\t\tbuttonElement.type = \"button\"; buttonElement.name = \"buttonElement\";\n\t    \tbuttonElement.define = \"buttonElementDefinition\";\n\t    \ttestPage.rawLayout = [buttonElement];\n\t    \tlet aJQObject: JQuery  = testTemplatingService.createPage(testPage);\n\t    \texpect($(\"button\", aJQObject).attr(\"id\")).toEqual(buttonElement.name);\n\t    \texpect($(\".btn\", aJQObject)).toHaveText(<string>buttonElement.define);\n\t    });\n\t    it('that for text type contains right ID, p and text elements', () => {\n\t    \tlet textElement = new MockElement();\n\t    \ttextElement.type = \"text\"; textElement.name = \"textElement\";\n\t    \ttextElement.define = \"textElementDefinition\";\n\t    \ttestPage.rawLayout = [textElement];\n\t        let aJQObject: JQuery  = testTemplatingService.createPage(testPage);\n\t        expect($(\"#textElement\", aJQObject)).toExist();\n\t        expect($(\"p\", aJQObject)).toHaveText(<string>textElement.define);\n\t    });\n\t    it('that for image type contains right ID, class, img attr and img source', () => {\n\t    \tlet imageElement = new MockElement();\n\t    \timageElement.type = \"image\"; imageElement.name = \"imageElement\";\n\t    \timageElement.define = \"../dist/assets/food.png\";\n\t    \ttestPage.rawLayout = [imageElement];\n\t    \tlet aJQObject: JQuery  = testTemplatingService.createPage(testPage);\n\t    \texpect($(\"#imageElement\", aJQObject)).toExist();\n\t    \texpect($(\".img-fluid\", aJQObject)).toExist();\n\t        expect($(\"img\", aJQObject).attr(\"src\")).toEqual(imageElement.define);\n\t    });\n\t    it('that for input type contains the right classes, attributes and text', () => {\n\t    \tlet inputElement = new MockElement();\n\t    \tinputElement.type = \"input\"; inputElement.name = \"inputElement\";\n\t    \tinputElement.define = \"inputElementDefinition\";\n\t    \ttestPage.rawLayout = [inputElement];\n\t    \tlet aJQObject: JQuery  = testTemplatingService.createPage(testPage);\n\t    \texpect($(\".form-group\", aJQObject)).toExist();\n\t    \texpect($(\".sr-only\", aJQObject)).toExist();\n\t    \texpect($(\".form-control\", aJQObject)).toExist();\n\t    \texpect($(\"label\", aJQObject).attr(\"for\")).toEqual(inputElement.name);\n\t    \texpect($(\"input\", aJQObject).attr(\"type\")).toEqual(\"text\");\n\t    \texpect($(\"input\", aJQObject).attr(\"id\")).toEqual(inputElement.name);\n\t    \texpect($(\"input\", aJQObject).attr(\"for\")).toEqual(inputElement.name);\n\t    \texpect($(\"input\", aJQObject).attr(\"placeholder\")).toEqual(inputElement.define);\n\t    \texpect($(\"input\", aJQObject)).toHaveText(<string>inputElement.define);\n\t    });\n\t    it('that for list type contains the right classes and descriptions', () => {\n\t    \tlet listElement = new MockElement();\n\t    \tlistElement.type = \"list\"; listElement.name = \"listElement\";\n\t    \tlistElement.define = \n\t    \t[{title: \"item1\", description: \"item1Desc\", url: \"item1url\"},\n\t    \t {title: \"item2\", description: \"item2Desc\", url: \"item2url\"}];\n\t    \ttestPage.rawLayout = [listElement];\n\t    \tlet aJQObject: JQuery  = testTemplatingService.createPage(testPage);\n\t    \texpect($(\".list-group\", aJQObject)).toExist();\n\t    \texpect($(\"h5\", aJQObject)).toHaveHtml(\"item1\");\n\t    \texpect($(\"h5:nth(1)\", aJQObject)).toHaveHtml(\"item2\");\n\t    \texpect($(\"p\", aJQObject)).toHaveHtml(\"item1Desc\");\n\t    \texpect($(\"p:nth(1)\", aJQObject)).toHaveHtml(\"item2Desc\");\n\t    \t//console.log($(\"h5:nth(1)\", aJQObject)[0].outerHTML);\n\t    });\n\t});\n    it('createPagesAndSave() should call createPage the right number of times', () => {\n    \tspyOn(testTemplatingService, 'createPage');\n    \ttestTemplatingService.createPagesAndSave();\n        expect(testTemplatingService.createPage.calls.count()).toBe(2);\n    });\n    it('createLayout() should return a jQuery object with a div of class conatiner-fluid', () => {\n    \tlet aJQObject: JQuery  = testTemplatingService.createLayout();\n        expect($(aJQObject)).toHaveClass(\"container-fluid\");\n    \texpect($(aJQObject)).toEqual(\"div\");\n    });\n    it('removeElementFromDOM() should remove the specified element from the DOM', () => {\n    \tsetFixtures(\"<div class='container-fluid'></div>\");\n    \texpect($(\".container-fluid\")).toExist();\n        testTemplatingService.removeElementFromDOM(\".container-fluid\");\n        expect($(\".container-fluid\")).not.toExist();\n    });\n    it('createjQueryItem() should return the correct jQuery object', () => {\n    \tlet aJQItem: JQuery = testTemplatingService.createjQueryItem(\"div\",\n    \t\t [{key:\"id\", value:\"testID\"}], \"testClass\", \"testString\");\n        //Note that for below, don't need a selector, as the object is just one element.\n        //When passing a selector and context, only searches within that context, not including\n        //the parent, so $(#testID, aJQItem) will return an empty jQuery object\n        expect($(aJQItem)).toHaveId(\"testID\");\n        expect($(aJQItem)).toHaveClass(\"testClass\");\n        //below is just a reminder on how to see the actual html for debugging as needed\n        //expect(aJQItem[0].outerHTML).toHaveId(\"testID\");\n    });\n});\n\nclass MockTemplatingService implements ITemplatingService{\n\t_stateService:IStateService;\n    createPage(page:IPage):JQuery {return $(document.createElement(\"div\"))\n    \t\t\t\t\t\t\t\t\t\t\t\t.addClass(\"testingClass\")};\n    createPagesAndSave() {};\n    createLayout():JQuery {return $(document.createElement(\"div\"))};\n    removeElementFromDOM(className:string) {};\n    createjQueryItem(type:string,\n                     attrs?:Array<{key:string,value:string}>,\n                     styleClasses?:string,\n                     text?:string): JQuery {return $(document.createElement(\"div\"))\n    \t\t\t\t\t\t\t\t\t\t\t\t.addClass(\"testingClass\")};\n}\n\nlet myMockTemplatingService = new MockTemplatingService();\n\ndescribe('Tests for SystemService method', () => {\n\tlet testSystemService: SystemService = new SystemService(myMockTemplatingService, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t myMockStateService); \n\tit('removeCurrentPageFromScreen() should remove the current page from the DOM', () => {\n    \tspyOn(myMockTemplatingService, \"removeElementFromDOM\");\n    \ttestSystemService.removeCurrentPageFromScreen();\n    \texpect(myMockTemplatingService.removeElementFromDOM)\n    \t\t\t\t\t.toHaveBeenCalledWith(\".container-fluid\");\n    });\n\tit('goPage() should remove the current page, and show the new one', () => {\n\t\tpage2.afterRenderLayout = $(document.createElement(\"div\")).addClass(\"second\")\n\t\tsetFixtures(\"<div class='emulator'></div>\");\n\t\texpect($(\".second\")).not.toExist();\n        spyOn(testSystemService, \"removeCurrentPageFromScreen\");\n        spyOn(testSystemService, \"renewCurrentPage\");\n        testSystemService.goPage(\"page2\");\n        expect(testSystemService.removeCurrentPageFromScreen).toHaveBeenCalled();\n        expect(testSystemService.renewCurrentPage).toHaveBeenCalledWith(\"page2\");\n        expect($(\".second\")).toExist();\n    });\n    describe('renderAllPages() should', () => {\n\t    it('if called with a page, should rerender the page', () => {\n            spyOn(myMockTemplatingService, \"createPage\").and.callThrough();\n            spyOn(myMockStateService, \"getPage\").and.callThrough();\n            expect($(page1.afterRenderLayout)).not.toExist();\n            testSystemService.renderAllPages(page1);\n            expect(myMockTemplatingService.createPage).toHaveBeenCalledWith(page1);\n            expect(myMockStateService.getPage).toHaveBeenCalledWith(page1.name);\n            expect($(page1.afterRenderLayout)).toExist();\n\t    });\n\t    it('if called with no arguments, call createPagesAndSave()', () => {\n\t    \tspyOn(myMockTemplatingService, \"createPagesAndSave\");\n\t    \ttestSystemService.renderAllPages();\n\t    \texpect(myMockTemplatingService.createPagesAndSave).toHaveBeenCalledWith();\n\t    });\n    });\n    it('goStartPage() should call getStartPageName and goPage', () => {\n    \t//this.goPage(this._stateService.getStartPageName());\n    \tspyOn(myMockStateService, \"getStartPageName\");\n    \tspyOn(testSystemService, \"goPage\");\n    \ttestSystemService.goStartPage();\n    \texpect(myMockStateService.getStartPageName).toHaveBeenCalled();\n    \texpect(testSystemService.goPage).toHaveBeenCalled();\n    });\n    it('renewCurrentPage() should call setCurrentPageName from StateService', () => {\n        spyOn(myMockStateService, \"setCurrentPageName\");\n        testSystemService.renewCurrentPage(\"testName\");\n        expect(myMockStateService.setCurrentPageName)\n        \t\t\t\t\t\t .toHaveBeenCalledWith(\"testName\");\t\n    });\n    it('startEmulator() should call hideSplashScreen,' + \n    \t\t'renderAllPages and goStartPage', (done) => {\n    \tspyOn(testSystemService, \"hideSplashScreen\");\n    \tspyOn(testSystemService, \"renderAllPages\");\n    \tspyOn(testSystemService, \"goStartPage\");\n    \ttestSystemService.startEmulator();\n\n    \tlet POLL_TIME = 10;\n    \tlet endTime = new Date().getTime() + 10000;\n    \tlet checkCondition = () => {\n        \tif (new Date().getTime() <= endTime && \n        \t\ttestSystemService.goStartPage.calls.count() < 1) {\n            \tsetTimeout(checkCondition, POLL_TIME);\n            } else {   \n\t\t    \texpect(testSystemService.hideSplashScreen).toHaveBeenCalled();\n\t\t    \texpect(testSystemService.renderAllPages).toHaveBeenCalled();\n\t\t    \texpect(testSystemService.goStartPage).toHaveBeenCalled();\n                done();\n            }\n        };\n        checkCondition();\n    }, 10000);\n    it('hideSplashScreen() should hide the splash screen', () => {\n    \tsetFixtures(\"<div class='splashScreen'></div>\");\n    \texpect($(\".splashScreen\")).toBeVisible();\n        testSystemService.hideSplashScreen();\n        expect($(\".splashScreen\")).not.toBeVisible();\n    });\n    it('showNotification() should show a notification, and then fade it out', (done) => {\n    \tsetFixtures(\"<div class='emulator'></div>\");\n    \texpect($(\".testingClass\")).not.toBeVisible();\n    \ttestSystemService.showNotification(\"blah\");\n    \texpect($(\".testingClass\")).toBeVisible();\n\n    \tlet POLL_TIME = 10;\n    \tlet endTime = new Date().getTime() + 5000;\n    \tlet checkCondition = () => {\n        \tif (new Date().getTime() <= endTime && \n        \t\t$(\".testingClass\").is(\":visible\")) {\n            \tsetTimeout(checkCondition, POLL_TIME);\n            } else {\n\t\t\t\texpect($(\".testingClass\")).not.toBeVisible();\n                done();\n            }\n        };\n        checkCondition();\n    }, 5000);\n});\n\ndescribe('Tests for ActionService', () => {\n\t//don't need a proper mock for SystemService here, as shadowing all its required\n\t//functions with spies\n\tlet myMockSystemService = new SystemService(myMockTemplatingService, myMockStateService);\n\tlet testActionService = new ActionService(myMockSystemService);\n\tit('goPage() should call goPage from SystemService', () => {\n\t\tspyOn(myMockSystemService, \"goPage\");\n\t\ttestActionService.goPage(\"page1\");\n\t\texpect(myMockSystemService.goPage).toHaveBeenCalledWith(\"page1\");\n    });\n    it('showNotification() should call showNotification from SystemService', () => {\n    \tspyOn(myMockSystemService, \"showNotification\");\n\t\ttestActionService.showNotification(\"showNotification\");\n\t\texpect(myMockSystemService.showNotification).toHaveBeenCalledWith(\"showNotification\");\n    });\n    it('reRenderPage() should renderAllPages from SystemService', () => {\n    \tspyOn(myMockSystemService, \"renderAllPages\");\n\t\ttestActionService.reRenderPage(page1);\n\t\texpect(myMockSystemService.renderAllPages).toHaveBeenCalledWith(page1);\n    });\n});\n\nclass MockActionService implements IActionService{\n    _systemService:ISystemService = new SystemService(myMockTemplatingService, myMockStateService);\n    goPage(name:string) {};\n    showNotification(words:string) {};\n    callYelpSearchAPI(keywords:string, callback:Function) {};\n    reRenderPage(page:IPage) {};\n    saveToLocalStorage(key:string,value:string) {};\n    getFromLocalStorage(key:string):string {return \"\"};\n}\n\nlet myMockActionService = new MockActionService();\n\ndescribe('Tests for Application', () => {\n\tlet testApplication = new application();\n\t\n\tit('injectActionService() should store the injected ActionService', () => {\n\t\ttestApplication.injectActionService(myMockActionService);\n\t\texpect(testApplication._actionService).toBe(myMockActionService);\n\t});\n\n\ttestApplication.startAddingPages(); //here so that other functions have access to the pages\n\tit('startAddingPages() should add three objects into the apps pages array', () => {\n\t\texpect(testApplication.pages.length).toEqual(3);\n\t});\n\n\tdescribe(\"appCallBack() when called with\", () => {\n\t\tit('page1button to call callYelpSearchAPI (in ActionService)', () => {\n\t\t\tspyOn(myMockActionService, \"callYelpSearchAPI\");\n\t\t\ttestApplication.appCallback(\"test\", \"page1button\", \"searchTerm\");\n\t\t\texpect(myMockActionService.callYelpSearchAPI).toHaveBeenCalled();\n\t\t});\n\t\tit('home to call getMatchedFunctino with the right arguments', () => {\n\t\t\tspyOn(testApplication, \"getMatchedFunction\");\n\t\t\ttestApplication.getMatchedFunction(\"test\", \"home\");\n\t\t\texpect(testApplication.getMatchedFunction).toHaveBeenCalledWith(\"test\", \"home\");\n\t\t});\n\t\tit('mapButton to call getMatchedFunctino with the right arguments', () => {\n\t\t\tspyOn(testApplication, \"getMatchedFunction\");\n\t\t\ttestApplication.getMatchedFunction(\"test\", \"mapButton\");\n\t\t\texpect(testApplication.getMatchedFunction).toHaveBeenCalledWith(\"test\", \"mapButton\");\n\t\t});\n\t\tit('backToResults to call getMatchedFunctino with the right arguments', () => {\n\t\t\tspyOn(testApplication, \"getMatchedFunction\");\n\t\t\ttestApplication.getMatchedFunction(\"test\", \"backToResults\");\n\t\t\texpect(testApplication.getMatchedFunction).toHaveBeenCalledWith(\"test\", \"backToResults\");\n\t\t});\n\t});\n\tit('getMatchedFunction() should return the correct function', () => {\n\t\tlet testFunc = testApplication.getMatchedFunction(\"page3Map\", \"backToResults\");\n\t\texpect(testFunc).toEqual(testApplication.pages[2].callback[0].callbackFunction);\n\t});\n\tdescribe(\"tailorYelpResult() should\", () => {\n\t\tlet testString = testApplication.tailorYelpResult(undefined);\n\t\tlet jsonOb = {};\n\t\tit('return the the error message when called with undefined', () => {\n\t\t\texpect(testString.indexOf(\"Sorry\")).toBeGreaterThan(-1);\n\t\t});\n\t\tit('return the a string with appropriate contents if called with an empty json object', () => {\n\t\t\ttestString = testApplication.tailorYelpResult(jsonOb);\n\t\t\texpect(testString.indexOf(\"Rating\")).toBeGreaterThan(-1);\n\t\t});\n\t\tjsonOb = {\"location\":{ \"address\":[ \"150 Stuart St\"],\n\t        \t\t\t\t\t   \"coordinate\":{ \"latitude\":-45.8744,\n\t            \t\t\t\t\t\t\t\t  \"longitude\":170.504\n\t        \t\t\t\t\t\t\t\t\t}\n\t    \t\t\t\t\t }\n\t    \t\t }\n\t\tit('return a string with appropriate details when called with a populated json object', () => {\n\t    \ttestString = testApplication.tailorYelpResult(jsonOb);\n\t    \texpect(testString.indexOf(\"150 Stuart St\")).toBeGreaterThan(-1);\n\t    });\n\t\tit('call googleMapsHelper with the coords if called with a json object containing them', () => {\n\t    \tspyOn(testApplication, \"googleMapsHelper\");\n\t    \ttestString = testApplication.tailorYelpResult(jsonOb);\n\t    \texpect(testApplication.googleMapsHelper).toHaveBeenCalledWith(\"-45.8744,170.504\");\n\t\t});\n\t});\n\tit('googleMapsHelper() should return the correct string', () => {\n\t\tlet coords: string = \"45.00,45.00\";\n\t\tlet url: string = testApplication.googleMapsHelper(coords);\n\t\texpect(url.indexOf(coords)).toEqual(186); //should always be in that position\n\t\tcoords = \"asdfasdf\";\n\t\turl = testApplication.googleMapsHelper(coords);\n\t\texpect(url.indexOf(coords)).toEqual(186);\n\t});\t\n});\n\n\n/** WEBPACK FOOTER **\n ** ../spec/test.spec.ts\n **/","import {IApp} from \"../emulator/models/dataModels/IApp\";\nimport {IPage} from \"../emulator/models/dataModels/IPage\";\nimport {page1search} from \"./page1search\";\nimport {page2list} from \"./page2list\";\nimport {page3Map} from \"./page3Map\";\nimport {IActionService} from \"../emulator/models/serviceModels/IActionService\";\nimport {IFunc} from \"../emulator/models/dataModels/IFunction\"\nimport {IListItem} from \"../emulator/models/dataModels/IListItem\";\n\nexport class application implements IApp {\n\n    title: string;\n    currentPageName: string;\n    startPageName: string;\n    pages: Array<IPage>;\n    CentralCallbackFunc: (pageName: string, elementID?: string) => any;\n    _actionService: IActionService;\n\n    constructor() {\n        this.title = \"YumE\";\n        this.currentPageName = \"\";\n        this.startPageName = \"page1search\";\n        this.pages = [];\n        this.CentralCallbackFunc = this.appCallback;\n    }\n\n    injectActionService(as: IActionService) {\n        this._actionService = as;\n    }\n\n    startAddingPages() {\n        this.pages.push(new page1search());\n        this.pages.push(new page2list());\n        this.pages.push(new page3Map());\n    }\n\n    createPageArray() {\n\n    }\n\n    appCallback(pageName:string, elementName: string, targetElementInfo?: string) {\n        let func:Function;\n        switch (elementName){\n            case \"page1button\":\n                if (targetElementInfo){\n                    this._actionService.callYelpSearchAPI(targetElementInfo,(json:any)=>{\n                        let list = this.tailorYelpResult(json);\n                        for(let page of this.pages){\n                            if (page.name === 'page2list'){\n                                for(let e of page.rawLayout){\n                                    if (e.type === 'text'&&e.name==='page2text'){\n                                        e.define = list;\n                                    } else if (e.type === 'image') {\n                                        if (typeof json !== 'undefined') {\n                                            if (typeof json.image_url !== 'undefined'){ \n                                                e.define = <string>json.image_url; //better image\n                                            } else {\n                                                //set default image only if valid json, but no image\n                                                e.define = \"assets/food.png\";\n                                            }\n                                        }\n                                    }\n                                }\n                                this._actionService.reRenderPage(page);\n                                break;\n                            }\n                        }\n                        func = this.getMatchedFunction(pageName,elementName,targetElementInfo);\n                        func(this._actionService,targetElementInfo);\n                    });\n                } else {\n                    this.getMatchedFunction(pageName,elementName)(this._actionService);\n                }\n\n                break;\n            case \"home\":\n                func = this.getMatchedFunction(\"page2list\",elementName)\n                func(this._actionService);\n                break;\n            case \"mapButton\":\n                this._actionService.reRenderPage(this.pages[2]);\n                func = this.getMatchedFunction(\"page2list\",elementName)\n                func(this._actionService);\n                break;\n            case \"backToResults\":\n                func = this.getMatchedFunction(\"page3Map\",elementName)\n                func(this._actionService);\n        }\n    }\n\n    getMatchedFunction(pageName: string, elementID: string, targetElementID?:string): Function {\n        let callback: IFunc;\n        let targetPage: IPage;\n\n        for (let page of this.pages) {\n            if (page.name === pageName) {\n                targetPage = page;\n                break;\n            }\n        }\n\n        for (let func of targetPage.callback) {\n            if (func.bindToName === elementID) {\n                callback = func;\n                break;\n            }\n        }\n\n        return callback.callbackFunction;\n    }\n\n    tailorYelpResult(json:Object):string{\n        let define:string;\n\n        //Yelp API suck even for v2 version.\n        if (json) {\n            let _item:any = json;\n\n            //Need this weird coding, to cover yelp's bad non-consistent API design.\n            let title:string = _item.name ? _item.name : \"\";\n            let phone:string = _item.phone ? _item.phone :\"\";\n            let rating:string = _item.rating ? _item.rating : \"\";\n            let category:string = _item.categories ? _item.categories[0][0] : \"\";\n            let comment:string = _item.snippet_text ? _item.snippet_text : \"\";\n\n            let address:string;\n            let lat:number;\n            let long:number\n            if(_item.location){\n                address = _item.location.address ? _item.location.address[0] : \"\";\n                if(_item.location.coordinate){\n                    lat = _item.location.coordinate.latitude;\n                    long = _item.location.coordinate.longitude;\n                } else {\n                    lat = long = 0;\n                }\n            } else {\n                address = \"\";\n                lat = long = 0;\n            }\n            for(let e of this.pages[2].rawLayout){\n                if(e.type === 'image'){\n                    let coords = \"\"+lat + \",\" + long;\n                    e.define = this.googleMapsHelper(coords);\n                    break;\n                }\n            }\n\n            define ='<br/>'+'<strong>Title: \\</strong>' + title + '<br/>'+'<strong>Phone: \\</strong>'\n                     + phone + '   |  '  + '<strong\\>Address: \\</strong>' + address\n                     + '<br/>' +'<strong>Rating: \\</strong>' + rating\n                     + '   |  ' +'<strong>Category: \\</strong>' + category\n                     + '<br/>' +'<strong>Comment: \\</strong>' + comment;\n        } else {\n            define = '<br/>' + \"Sorry, Yelp can't recognize your keyword, please go back and search again.\"\n            //so that sad image returns if successful then failed search\n            this.pages[1].rawLayout[3].define = \"./assets/cry.png\";\n        }\n        return define;\n    }\n\n    googleMapsHelper(coords: string): string{\n        let mapURL: string = \"https://maps.googleapis.com/maps/api/staticmap?&size=300x230&maptype=roadmap\" +\n                     \"&visible=Octagon,Dunedin,NZ\" +\n                     \"&markers=color:yellow%7Clabel:U%7C-45.8743,170.5036\" + \n                     \"&markers=color:blue%7Clabel:F%7C\";\n        let apiKey: string = \"&key=AIzaSyDHTnM42xU_IGgOk0OGswZGOAtDRr8e66I\";\n        return mapURL + coords + apiKey;\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./application/application.ts\n **/","import {IFunc} from \"../emulator/models/dataModels/IFunction\";\nimport {IElement} from \"../emulator/models/dataModels/IElement\";\nimport {IPage} from \"../emulator/models/dataModels/IPage\";\nimport {IActionService} from \"../emulator/models/serviceModels/IActionService\";\n\nexport class page1search implements IPage{\n    name: string;\n    rawLayout: Array<IElement>;\n    afterRenderLayout: JQuery;\n    callback: Array<IFunc>;\n\n    constructor() {\n        this.name = \"page1search\";\n        this.rawLayout = this.returnRawLayout();\n        this.afterRenderLayout = null;\n        this.callback = this.returnCallbackFuncs();\n    }\n\n    returnRawLayout():Array<IElement>{\n        return [\n            {\n                type:\"image\",\n                name:\"page1image\",\n                define:\"./assets/YuMe_logo.jpg\"\n            },\n            {\n                type:\"text\",\n                name:\"page1text\",\n                define:\"Search better, eat fatter :)\"\n            },\n            {\n                type:\"input\",\n                name:\"page1input\",\n                define:\"Enter the name\"\n            },\n            {\n                type:\"button\",\n                name:\"page1button\",\n                targetElementID:\"page1input\",\n                define:\"YumE it!\"\n            },\n            {\n                type:\"text\",\n                name:\"page1text1\",\n                define:\" \"\n            }\n        ];\n    }\n\n    returnCallbackFuncs():Array<IFunc>{\n        return [\n            {\n                bindToName:\"page1button\",\n                targetID:\"page1text\",\n                callbackFunction:this.searchButtonCallBack\n            }\n        ];\n    }\n\n    searchButtonCallBack(_actionService:IActionService, info:string){\n        if (info && info != \"\"){\n            _actionService.goPage(\"page2list\");\n        } else{\n            _actionService.showNotification(\"Please enter the name of restaurant.\");\n        }\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./application/page1search.ts\n **/","import {IFunc} from \"../emulator/models/dataModels/IFunction\";\nimport {IElement} from \"../emulator/models/dataModels/IElement\";\nimport {IPage} from \"../emulator/models/dataModels/IPage\";\nimport {IActionService} from \"../emulator/models/serviceModels/IActionService\";\n\nexport class page2list implements IPage{\n    name: string;\n    rawLayout: Array<IElement>;\n    afterRenderLayout: JQuery;\n    callback: Array<IFunc>;\n\n    constructor() {\n        this.name = \"page2list\";\n        this.rawLayout = this.returnRawLayout();\n        this.afterRenderLayout = null;\n        this.callback = this.returnCallbackFuncs();\n    }\n\n    returnRawLayout():Array<IElement>{\n        return [\n            {\n                type:\"text\",\n                name:\"page2placeholder\",\n                define:\" \"\n            },\n            {\n                type:\"button\",\n                name:\"home\",\n                define:\"Back\"\n            },\n            {\n                type:\"text\",\n                name:\"page2placeholder\",\n                define:\" \"\n            },\n            {\n                type:\"image\",\n                name:\"page2image\",\n                define:\"./assets/cry.png\"\n            },\n            {\n                type:\"text\",\n                name:\"page2text\",\n                define:\"I really love it\"\n            },\n            {\n                type:\"button\",\n                name:\"mapButton\",\n                define:\"Map\"\n            }\n        ];\n    }\n\n    returnCallbackFuncs():Array<IFunc>{\n        return [\n            {\n                bindToName:\"home\",\n                callbackFunction:this.goBackButtonCallBack\n            },\n            {\n                bindToName:\"mapButton\",\n                callbackFunction:this.goMapCallBack\n            }\n        ];\n    }\n\n    goBackButtonCallBack(_actionService:IActionService){\n        _actionService.goPage(\"page1search\");\n    }\n    goMapCallBack(_actionService:IActionService){\n        _actionService.goPage(\"page3Map\");\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./application/page2list.ts\n **/","import {IFunc} from \"../emulator/models/dataModels/IFunction\";\nimport {IElement} from \"../emulator/models/dataModels/IElement\";\nimport {IPage} from \"../emulator/models/dataModels/IPage\";\nimport {IActionService} from \"../emulator/models/serviceModels/IActionService\";\n\nexport class page3Map implements IPage{\n    name: string;\n    rawLayout: Array<IElement>;\n    afterRenderLayout: JQuery;\n    callback: Array<IFunc>;\n    defaultMap: string = \"https://maps.googleapis.com/maps/api/staticmap?&size=300x230&maptype=roadmap\" +\n                     \"&visible=Octagon,Dunedin,NZ\" +\n                     \"&markers=color:yellow%7Clabel:U%7C-45.8743,170.5036\" +\n                     \"&key=AIzaSyDHTnM42xU_IGgOk0OGswZGOAtDRr8e66I\";\n\n    constructor() {\n        this.name = \"page3Map\";\n        this.rawLayout = this.returnRawLayout();\n        this.afterRenderLayout = null;\n        this.callback = this.returnCallbackFuncs();\n    }\n\n    returnRawLayout():Array<IElement>{\n        return [\n            {\n                type:\"text\",\n                name:\"page3placeholder\",\n                define:\" \"\n            },\n            {\n                type:\"button\",\n                name:\"backToResults\",\n                define:\"Back\"\n            },\n            {\n                type:\"button\",\n                name:\"home\",\n                define:\"Search\"\n            },\n            {\n                type:\"text\",\n                name:\"page3placeholder\",\n                define:\" \"\n            },\n            {\n                type:\"image\",\n                name:\"page3image\",\n                define: this.defaultMap\n            }\n        ];\n    }\n\n    returnCallbackFuncs():Array<IFunc>{\n        return [\n            {\n                bindToName:\"backToResults\",\n                callbackFunction:this.goBackButtonCallBack\n            },\n            {    \n                bindToName:\"home\",\n                callbackFunction:this.goHomeCallBack\n            }\n        ];\n    }\n\n    goBackButtonCallBack(_actionService:IActionService){\n        _actionService.goPage(\"page2list\");\n    }\n\n    goHomeCallBack(_actionService:IActionService){\n        _actionService.goPage(\"page1search\");\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./application/page3Map.ts\n **/","import {IStateService} from \"../models/serviceModels/IStateService\";\nimport {IPage} from \"../models/dataModels/IPage\";\nimport {IApp} from \"../models/dataModels/IApp\";\nimport {IElement} from \"../models/dataModels/IElement\";\n\n\nexport class StateService implements IStateService {\n    _app: IApp;\n\n    /**\n     * Constructs the application\n     * @method constructor\n     * @param  {IApp}      app - retrieves required information\n     * @return {[type]}        - returns the application information\n     */\n    constructor(app: IApp) {\n        this._app = app;\n    }\n\n    getStartPageName(): string {\n        return this._app.startPageName;\n    }\n\n    getCurrentPageName(): string {\n        return this._app.currentPageName;\n    }\n\n    setCurrentPageName(name: string) {\n        this._app.currentPageName = name;\n    }\n\n    getCurrentPage(): IPage {\n        let targetName: string = this._app.currentPageName;\n        let returnPage: IPage;\n        for (let page of this._app.pages) {\n            if (page.name === targetName) {\n                returnPage = page;\n                break;\n            }\n        }\n        return returnPage;\n    }\n\n    getPage(name: string): IPage {\n        let returnPage: IPage;\n        for (let page of this._app.pages) {\n            if (page.name === name) {\n                returnPage = page;\n                break;\n            }\n        }\n        return returnPage;\n    }\n\n    getPages(): Array<IPage> {\n        return this._app.pages;\n    }\n\n    emulatorCentralCallBack(element: IElement, targetElementInfo?: string) {\n        let currentPageName:string = this.getStartPageName();\n        if (targetElementInfo) {\n            this._app.CentralCallbackFunc(currentPageName, element.name, targetElementInfo);\n        } else {\n            this._app.CentralCallbackFunc(currentPageName, element.name);\n        }\n    }\n\n    getAppCallBack(): (pageName: string, elementID?: string) => void {\n        return this._app.CentralCallbackFunc;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./emulator/services/StateService.ts\n **/","///<reference path=\"../ui/types/jquery.d.ts\" />\n\nimport {IPage} from '../models/dataModels/IPage'\nimport {ITemplatingService} from \"../models/serviceModels/ITemplatingService\";\nimport {IElement} from \"../models/dataModels/IElement\";\nimport {IStateService} from \"../models/serviceModels/IStateService\";\nimport {IListItem} from \"../models/dataModels/IListItem\";\n\nexport class TemplatingService implements ITemplatingService {\n    _stateService: IStateService;\n\n    /**\n     * Constructs the service state\n     * @method constructor\n     * @param  {IStateService} stateService - provides the service state\n     * @return {[type]}                     - returns service template\n     */\n    constructor(stateService: IStateService) {\n        this._stateService = stateService;\n    }\n\n    createPage(page: IPage): JQuery {\n        let outDiv: JQuery = this.createLayout();\n\n        for (let element1 of page.rawLayout){\n            let row = this.createjQueryItem(\"div\",\n                undefined,\n                \"row\",\n                undefined);\n            let element:IElement = element1;\n            switch (element.type) {\n                case \"button\":\n                    let temp = this.createjQueryItem(\"button\",\n                        [{key:\"id\", value:element.name}],\n                        \"btn btn-primary btn-lg btn-block\", //btn-block\n                        <string>element.define);\n                    if (element.targetElementID) {\n                        $(\".emulator\").on(\n                            'click',\n                            \"#\"+element.name,\n                            ()=>{\n                                let targetText = $(\"#\"+element.targetElementID).val();\n                                this._stateService.emulatorCentralCallBack(element,targetText);\n                            });\n                    } else {\n                        $(\".emulator\").on(\n                            'click',\n                            \"#\"+element.name,\n                            ()=>{\n                                this._stateService.emulatorCentralCallBack(element);\n                            });\n                    }\n                    if($(\".btn\", outDiv).length) { //if there already a button on the page\n                        var buttons = $(\".btn\", outDiv);\n                        let width  = 12 / (buttons.length + 1);\n                        buttons.after(temp);\n                        buttons = $(\".btn\", outDiv); //to capture new button too\n                        buttons.removeClass(\"btn-block\");\n                        buttons.addClass(\"col-sm-\" + width);\n                    } else {\n                        row.append(temp);\n                    }\n                    break;\n                case \"text\":\n                    let temp1 = this.createjQueryItem(\"p\",\n                        [{key:\"id\", value:element.name}],\n                        undefined,\n                        <string>element.define);\n                    row.append(temp1);\n                    break;\n                case \"image\":\n                    let temp2 = this.createjQueryItem(\"img\",\n                        [{key:\"id\", value:element.name}, {key:\"src\", value:<string>element.define}],\n                        \"img-fluid\");\n                    row.append(temp2);\n                    break;\n                case \"input\":\n                    let temp3 = this.createjQueryItem(\"div\", undefined, \"form-group\");\n\n                    let label = this.createjQueryItem(\"label\",\n                        [{key:\"for\", value:element.name}],\n                        \"sr-only\",\n                        <string>element.define);\n                    temp3.append(label);\n\n                    let input = this.createjQueryItem(\"input\",\n                        [{key:\"type\", value:\"text\"}, {key:\"id\", value:element.name}, {key:\"for\", value:element.name}, {key:\"placeholder\", value:<string>element.define}],\n                        \"form-control\",\n                        <string>element.define);\n                    temp3.append(input);\n                    row.append(temp3);\n                    break;\n                case \"list\":\n                    let listGroup = this.createjQueryItem(\"div\", undefined, \"list-group\");\n                    let listItemsData = <Array<IListItem>>(element.define);\n                    for (let item of listItemsData){\n                        let a = this.createjQueryItem(\"a\",\n                            undefined,\n                            \"list-group-item list-group-item-action\");\n                        $(\".emulator\").on(\n                            'click',\n                            \"#\"+element.name,\n                            ()=>{\n                                this._stateService.emulatorCentralCallBack(element,item.url);\n                            });\n                        let h5 = this.createjQueryItem(\"h5\",\n                            undefined,\n                            \"list-group-item-heading\",\n                            item.title);\n                        let p = this.createjQueryItem(\"p\",\n                            undefined,\n                            \"list-group-item-text\",\n                            item.description);\n                        a.append(h5);\n                        a.append(p);\n                        listGroup.append(a);\n                    }\n                    row.append(listGroup);\n                    break;\n            }\n            outDiv.append(row);\n        }\n\n        return outDiv;\n    }\n\n    createPagesAndSave() {\n        for (let page of this._stateService.getPages()){\n            page.afterRenderLayout = this.createPage(page);\n        }\n    }\n\n    createLayout(): JQuery {\n        return this.createjQueryItem('div', undefined, \"container-fluid\");\n    }\n\n    removeElementFromDOM(className: string) {\n        $(className).remove();\n    }\n\n    createjQueryItem(type: string,\n                     attrs?: Array<{key: string,value: string}>,\n                     styleClasses?: string,\n                     text?: string): JQuery {\n        let domElement = $(document.createElement(type));\n        if (styleClasses) {\n            domElement.addClass(styleClasses);\n        }\n        if (attrs) {\n            for (let item of attrs){\n                domElement.attr(item.key, item.value);\n            }\n        }\n\n        if (text) {\n            domElement.html(text);\n        }\n        return domElement;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./emulator/services/TemplatingService.ts\n **/","import {ISystemService} from \"../models/serviceModels/ISystemService\";\nimport {IApp} from \"../models/dataModels/IApp\";\nimport {IPage} from \"../models/dataModels/IPage\";\nimport {IStateService} from \"../models/serviceModels/IStateService\";\nimport {ITemplatingService} from \"../models/serviceModels/ITemplatingService\";\n\nexport class SystemService implements ISystemService{\n    _templatingService: ITemplatingService;\n    _stateService: IStateService;\n\n    /**\n     * Constructs the template and services\n     * @method constructor\n     * @param  {ITemplatingService} templatingService - provides the template\n     * @param  {IStateService}      stateService      - provides service state\n     * @return {[type]}                               - returns system service\n     */\n    constructor(templatingService: ITemplatingService, stateService: IStateService) {\n        this._templatingService = templatingService;\n        this._stateService = stateService;\n    }\n\n    removeCurrentPageFromScreen() {\n        this._templatingService.removeElementFromDOM(\".container-fluid\");\n    }\n\n    goPage(name: string) {\n        this.removeCurrentPageFromScreen();\n        for (let page of this._stateService.getPages()){\n            if (page.name === name){\n                $(\".emulator\").prepend(page.afterRenderLayout);\n                this.renewCurrentPage(page.name);\n            }\n        }\n    }\n\n    renderAllPages(page?:IPage){\n        if (page){\n            let page1:JQuery = this._templatingService.createPage(page);\n            this._stateService.getPage(page.name).afterRenderLayout = page1;\n        } else {\n            this._templatingService.createPagesAndSave();\n        }\n    }\n\n    goStartPage() {\n        this.goPage(this._stateService.getStartPageName());\n    }\n\n    renewCurrentPage(name: string) {\n        this._stateService.setCurrentPageName(name);\n    }\n\n    startEmulator() {\n        let backgroundDIV = this._templatingService.createjQueryItem(\"div\",undefined,\"splashScreen\");\n        let brand = this._templatingService.createjQueryItem(\"p\",undefined,\"brand\",\"Smartisan\");\n        $(\".emulator\").append(backgroundDIV);\n        backgroundDIV.append(brand);\n        backgroundDIV.fadeIn('slow',()=>{\n            brand.fadeIn('slow')\n                .fadeOut('slow')\n                .fadeIn('slow',()=>{\n                    this.hideSplashScreen();\n                    this.renderAllPages();\n                    this.goStartPage();\n                });\n        });\n    }\n\n    hideSplashScreen(){\n        $(\".splashScreen\").fadeOut('slow').remove();\n    }\n\n    showNotification(text:string) {\n        let noticeDIV = this._templatingService.createjQueryItem(\"div\", undefined, \"bg-danger\", text);\n        $(\".emulator\").prepend(noticeDIV);\n        setTimeout(()=>{\n            noticeDIV.fadeOut('slow').remove();\n        },2000);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./emulator/services/SystemService.ts\n **/","import {IActionService} from \"../models/serviceModels/IActionService\";\nimport {ISystemService} from \"../models/serviceModels/ISystemService\";\nimport {IPage} from \"../models/dataModels/IPage\";\n\ndeclare var OAuth:any;\n\nexport class ActionService implements IActionService{\n    _systemService: ISystemService;\n\n    /**\n     * Constructs the services provided to the application\n     * @method constructor\n     * @param  {ISystemService} systemService - retrieves required information\n     * @return {[type]}                       - returns service of page request\n     */\n    constructor(systemService: ISystemService) {\n        this._systemService = systemService;\n    }\n\n    goPage(name: string) {\n        this._systemService.goPage(name);\n    }\n\n    showNotification(words: string) {\n        this._systemService.showNotification(words);\n    }\n\n    saveToLocalStorage(key: string, value: string) {\n        localStorage.setItem(key,value);\n    }\n\n    getFromLocalStorage(key: string): string {\n        return localStorage.getItem(key);\n    }\n\n    reRenderPage(page:IPage){\n        this._systemService.renderAllPages(page);\n    }\n\n    callYelpSearchAPI(keywords:string, callback:Function){\n        let auth = {\n            consumerKey : \"sNul62e6H0We5KJLGYP_Bw\",\n            consumerSecret : \"RxvIBp4BxRvNVxjaPlUWuiPFcYg\",\n            accessToken : \"nguVll4te_e1oDcv2EkS4xKC6GOoQhcN\",\n            accessTokenSecret : \"DrumlhFl5Kwb1ksCpRKEtiW6B58\",\n            serviceProvider : {\n                signatureMethod : \"HMAC-SHA1\"\n            }\n        };\n\n        let terms = keywords;\n        let near = 'Dunedin';\n        let category = 'restaurants,food,bars'\n\n        let accessor = {\n            consumerSecret : auth.consumerSecret,\n            tokenSecret : auth.accessTokenSecret\n        };\n\n        let parameters = [];\n        parameters.push(['term', terms]);\n        parameters.push(['location', near]);\n        parameters.push(['category_filter', category]);\n        parameters.push(['callback', 'cb']);\n        parameters.push(['oauth_consumer_key', auth.consumerKey]);\n        parameters.push(['oauth_consumer_secret', auth.consumerSecret]);\n        parameters.push(['oauth_token', auth.accessToken]);\n        parameters.push(['oauth_signature_method', 'HMAC-SHA1']);\n\n        let message = {\n            'action' : 'https://api.yelp.com/v2/search',\n            'method' : 'GET',\n            'parameters' : parameters\n        };\n\n\n\n        OAuth.setTimestampAndNonce(message);\n        OAuth.SignatureMethod.sign(message, accessor);\n\n        let parameterMap = OAuth.getParameterMap(message.parameters);\n\n        $.ajax({\n            'url' : message.action,\n            'data' : parameterMap,\n            'dataType' : 'jsonp',\n            'jsonpCallback' : 'cb',\n            'cache': true\n        })\n        .done((data, textStatus, jqXHR) => {\n                callback(data.businesses[0]);\n            }\n        )\n        .fail((jqXHR, textStatus, errorThrown) => {\n                console.log('error[' + errorThrown + '], status[' + textStatus\n                                     + '], jqXHR[' + JSON.stringify(jqXHR) + ']');\n            }\n        );\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./emulator/services/ActionService.ts\n **/"],"sourceRoot":""}